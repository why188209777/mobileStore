<!doctype html>
<html lang="ch">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="手机商城后台">
		<meta name="keywords" content="手机商城后台">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<title>手机商城后台</title>
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script>
			$(function() {
				$(".meun-item").click(function() {
					$(".meun-item").removeClass("meun-item-active");
					$(this).addClass("meun-item-active");
					var itmeObj = $(".meun-item").find("img");
					itmeObj.each(function() {
						var items = $(this).attr("src");
						items = items.replace("_grey.png", ".png");
						items = items.replace(".png", "_grey.png")
						$(this).attr("src", items);
					});
					var attrObj = $(this).find("img").attr("src");;
					attrObj = attrObj.replace("_grey.png", ".png");
					$(this).find("img").attr("src", attrObj);
				});
				$("#topAD").click(function() {
					$("#topA").toggleClass(" glyphicon-triangle-right");
					$("#topA").toggleClass(" glyphicon-triangle-bottom");
				});
				$("#topBD").click(function() {
					$("#topB").toggleClass(" glyphicon-triangle-right");
					$("#topB").toggleClass(" glyphicon-triangle-bottom");
				});
				$("#topCD").click(function() {
					$("#topC").toggleClass(" glyphicon-triangle-right");
					$("#topC").toggleClass(" glyphicon-triangle-bottom");
				});
				$(".toggle-btn").click(function() {
					$("#leftMeun").toggleClass("show");
					$("#rightContent").toggleClass("pd0px");
				})
			})
		</script>
		<!--[if lt IE 9]>
  <script src="js/html5shiv.min.js"></script>
  <script src="js/respond.min.js"></script>
<![endif]-->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/common.css" />
		<link rel="stylesheet" type="text/css" href="css/slide.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/flat-ui.min.css" />
		<link rel="stylesheet" type="text/css" href="css/jquery.nouislider.css">
	</head>

	<body>
		<div id="wrap">
			<!-- 左侧菜单栏目块 -->
			<div class="leftMeun" id="leftMeun">
				<div id="logoDiv">
					<p id="logoP"><img id="logo" alt="左右结构项目" src="images/logo.png"><span>手机商城后台</span></p>
				</div>
				<div id="personInfor">
					
				</div>
				<div class="meun-title">账号管理</div>
				<div class="meun-item"><a href="adminindex.html"><img src="images/icon_user_grey.png">用户管理</a></div>
				<div class="meun-item"><a href="adminphone.html"><span class="glyphicon glyphicon-phone"></span>&nbsp;&nbsp;&nbsp;&nbsp;手机管理</a></div>
				<div class="meun-item"><a href="adminaddress.html">&nbsp;<span class="glyphicon glyphicon-tower"></span>&nbsp;&nbsp;&nbsp;&nbsp;地址管理</a></div>
				<div class="meun-item"><a href="admincomment.html"><span class="glyphicon glyphicon-edit"></span>&nbsp;&nbsp;&nbsp;&nbsp;评论管理</a></div>
				<div class="meun-item"><a href="adminorders.html">&nbsp;<span class="glyphicon glyphicon-gift"></span>&nbsp;&nbsp;&nbsp;&nbsp;订单管理</a></div>
				<div class="meun-item"><a href="adminimages.html">&nbsp;<span class="glyphicon glyphicon-picture"></span>&nbsp;&nbsp;&nbsp;&nbsp;图片管理</a></div>
				<div class="meun-item meun-item-active" href="#chan" aria-controls="chan" role="tab" data-toggle="tab"><img src="images/icon_change_grey.png">修改密码</div>

			</div>
			<!-- 右侧具体内容栏目 -->
			<div id="rightContent">
				<a class="toggle-btn" id="nimei">
					<i class="glyphicon glyphicon-align-justify"></i>
				</a>
				<!-- Tab panes -->
				<div class="tab-content">
					<!--添加用户-->
					
					<!-- 图片管理 -->
					
					<!--添加商品图片-->
					
					<!--修改商品图片-->
					
					<!--删除图片-->
					
					<!-- 权限管理模块 -->

					<!--手机管理模块-->
					
					<!--地址管理模块-->
					
					<!--添加地址模块-->
					
					<!--地址修改模块-->
					
					<!--地址删除警告-->
					
					<!--评论管理模块-->
					
					<!--添加评论模态框-->
					
					<!--评论详情模态框-->
					
					<!--删除评论模态框-->
					
					<!--订单管理模块-->
					
					<!--添加订单-->
					
					<!--订单修改模态框-->
					
					<!--订单删除模态框-->
					
					<!--添加手机模态框-->
					
					<!--用户管理模块-->
					
					<!-- 修改密码模块 -->
					<div role="tabpanel" class="tab-pane active" id="chan">
						<div class="check-div">
						</div>
						<div style="padding: 50px 0;margin-top: 50px;background-color: #fff; text-align: right;width: 420px;margin: 50px auto;">
							<form class="form-horizontal">
								<div class="form-group">
									<label for="sKnot" class="col-xs-4 control-label">原密码：</label>
									<div class="col-xs-5">
										<input type="password" class="form-control input-sm duiqi" id="oldpwd" placeholder="" style="margin-top: 7px;">
									</div>
								</div>
								<div class="form-group">
									<label for="sKnot" class="col-xs-4 control-label">新密码：</label>
									<div class="col-xs-5">
										<input type="password" class="form-control input-sm duiqi" id="password" placeholder="" style="margin-top: 7px;">
									</div>
								</div>
								<div class="form-group">
									<label for="sKnot" class="col-xs-4 control-label">重复密码：</label>
									<div class="col-xs-5">
										<input type="password" class="form-control input-sm duiqi" id="confirm" placeholder="" style="margin-top: 7px;">
									</div>
								</div>
								<div class="form-group text-right">
									<div class="col-xs-offset-4 col-xs-5" style="margin-left: 169px;">
										<button type="reset" class="btn btn-xs btn-white">取 消</button>
										<button type="button" class="btn btn-xs btn-green" id="updatePwd">保存</button>
									</div>
								</div>
							</form>
						</div>
						<div class="modal fade" id="addUser" role="dialog" aria-labelledby="gridSystemModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
										<h4 class="modal-title" id="gridSystemModalLabel">修改用户</h4>
									</div>
									<div class="modal-body">
										<div class="container-fluid">
											<form class="form-horizontal">
												<div class="form-group ">
													<label for="sName" class="col-xs-4 control-label">用户名：</label>
													<div class="col-xs-7 ">
														<input type="email" class="form-control input-sm duiqi" id="sName" placeholder="">
													</div>
												</div>
												<div class="form-group">
													<label for="situation" class="col-xs-4 control-label">设置会员：</label>
													<div class="col-xs-7">
														<label class="control-label" for="anniu">
                                                            <input type="radio" name="situation" id="normal"> 是</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
														<label class="control-label" for="meun">
                                                            <input type="radio" checked="checked" name="situation" id="forbid"> 不是</label>
													</div>
												</div>
												<div class="form-group">
													<label for="situation" class="col-xs-4 control-label">设置管理员：</label>
													<div class="col-xs-7">
														<label class="control-label" for="anniu">
                                                            <input type="radio" name="situation2" id="normal"> 是</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
														<label class="control-label" for="meun">
                                                            <input type="radio" checked="checked" name="situation2" id="forbid"> 不是</label>
													</div>
												</div>
												<div class="form-group">
													<label for="sKnot" class="col-xs-4 control-label">手机号码：</label>
													<div class="col-xs-7">
														<input type="" class="form-control input-sm duiqi" id="sKnot" placeholder="">
													</div>
												</div>
											</form>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
										<button type="button" class="btn btn-xs btn-green">保 存</button>
									</div>
								</div>
								<!-- /.modal-content -->
							</div>
							<!-- /.modal-dialog -->
						</div>
					</div>
					<!--是否为会员管理模块-->

					<!--规则管理模块-->

					<!--时间段管理模块-->

					<!--座位管理模块-->
				</div>
			</div>
		</div>
		<!-- 滑块js -->
		<!--	<script type="text/javascript">
        scale = function(btn, bar, title, unit) {
                this.btn = document.getElementById(btn);
                this.bar = document.getElementById(bar);
                this.title = document.getElementById(title);
                this.step = this.bar.getElementsByTagName("div")[0];
                this.unit = unit;
                this.init();
        };
        scale.prototype = {
                init: function() {
                        var f = this,
                                g = document,
                                b = window,
                                m = Math;
                        f.btn.onmousedown = function(e) {
                                var x = (e || b.event).clientX;
                                var l = this.offsetLeft;
//						var max = f.bar.offsetWidth - this.offsetWidth;
                                var max = f.bar.offsetWidth-20 ;
                                g.onmousemove = function(e) {
                                        var thisX = (e || b.event).clientX;
                                        var to = m.min(max, m.max(-2, l + (thisX - x)));
                                        f.btn.style.left = to+ 'px';
                                        f.ondrag(m.round(m.max(0, to / max) * 100), to);
                                        b.getSelection ? b.getSelection().removeAllRanges() : g.selection.empty();
                                };
                                g.onmouseup = new Function('this.onmousemove=null');
                        };
                },
                ondrag: function(pos, x) {
                        this.step.style.width = Math.max(0, x) +2+ 'px';
                        this.title.innerHTML = pos / 10 + this.unit + "";
                }
        }
        new scale('btn0', 'bar0', 'title0', "分钟");
        new scale('btn1', 'bar1', 'title1', "分钟");
        new scale('btn2', 'bar2', 'title2', "天");
        new scale('btn3', 'bar3', 'title3', "次");
</script>
-->
		<script src="js/jquery.nouislider.js"></script>
		<script src="js/jquery.cookie.js"></script>
		<script src="js/jquery.md5.js"></script>

		<!-- this page specific inline scripts -->
		<script>
			//min/max slider
			function huadong(my, unit, def, max) {
				$(my).noUiSlider({
					range: [0, max],
					start: [def],
					handles: 1,
					connect: 'upper',
					slide: function() {
						var val = Math.floor($(this).val());
						$(this).find(".noUi-handle").text(
							val + unit
						);
						console.log($(this).find(".noUi-handle").parent().parent().html());
					},
					set: function() {
						var val = Math.floor($(this).val());
						$(this).find(".noUi-handle").text(
							val + unit
						);
					}
				});
				$(my).val(def, true);
			}
			huadong('.slider-minmax1', "分钟", "5", 30);
			huadong('.slider-minmax2', "分钟", "6", 15);
			huadong('.slider-minmax3', "分钟", "10", 60);
			huadong('.slider-minmax4', "次", "2", 10);
			huadong('.slider-minmax5', "天", "3", 7);
			huadong('.slider-minmax6', "天", "8", 10);
		</script>

		<script type="text/javascript">
			var nameCookie = $.cookie('adminname');
			var pwdCookie = $.cookie('password');
			if (nameCookie == null){
				console.log(nameCookie);
				$("#personInfor").html(`<p><a href = "adminlogin.html">请登录</a></p>`);
			}else{
				$("#personInfor").html(`
					<p id="userName"></p>
					<p>
						<a href = "adminlogin.html">退出登录</a>
					</p>
				`);
				$("#userName").text(nameCookie);
			}

			$(document).on("click", "#updatePwd", function(){

				var oldpwd = $("#oldpwd").val();
				var password = $("#password").val();
				var confirm = $("#confirm").val();
				console.log(oldpwd);
				console.log(password);
				console.log(confirm);
				if(oldpwd==""){
					alert("密码不能为空");
				}else if(password==""){
				    alert("密码不能为空");
				}else if(confirm==""){
				    alert("密码不能为空");
				}else if(oldpwd.length<6||password.length<6||confirm.length<6){
				    alert("请重新输入密码，密码长度不能小于6");
				} else if(password!=confirm){
				    alert("两次密码输入不一致请重新输入");
				}else if (pwdCookie != $.md5(oldpwd)) {
					alert("原密码错误请重新输入");
				}else{
					$.ajax({
		   				type:"post",
		   				url:"admin",
		   				cache:false,
		   				data:{
		   					adminname:nameCookie,
		   					oldpwd:pwdCookie,
		   					newpwd:$.md5(password),
		   					op:"updatepwd"
		   				},
		   				dataType:"json",
		   				success:function(data){
		   					if (data){
		   						$.cookie('password', '');
		   						alert("修改成功，请重新登录");
		   						window.location.href = "adminindex.html";
		   					}else{
		   						alert("修改失败");
		   					}
		   				}
		   			});
				}
			});

		</script>
	</body>

</html>